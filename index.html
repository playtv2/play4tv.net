<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>HotPlay TV</title>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.0.0/firebase-auth-compat.js"></script>
    <style>
        body { background-color: #000; color: #fff; font-family: sans-serif; margin: 0; padding: 20px; text-align: right; }
        h1 { color: red; text-align: center; }
        .category-title { font-size: 24px; margin-top: 30px; border-bottom: 2px solid red; display: inline-block; }
        .series-row { display: flex; overflow-x: auto; gap: 15px; padding: 20px 0; }
        .series-card { min-width: 200px; background: #1a1a1a; border-radius: 10px; overflow: hidden; cursor: pointer; transition: 0.3s; }
        .series-card:hover, .series-card:focus { transform: scale(1.05); border: 2px solid white; outline: none; }
        .series-card img { width: 100%; height: 120px; object-fit: cover; }
        .series-name { padding: 10px; text-align: center; font-size: 16px; }
        .hidden { display: none !important; }
        #login-screen { text-align: center; padding-top: 100px; }
        .login-btn { padding: 15px 30px; font-size: 20px; cursor: pointer; background: red; color: white; border: none; border-radius: 5px; }
    </style>
</head>
<body>

    <div id="login-screen">
        <h1>ברוכים הבאים ל-HotPlay</h1>
        <button class="login-btn" onclick="login()">התחבר עם Google</button>
    </div>

    <div id="content" class="hidden">
        <h1>HotPlay VOD</h1>
        <div id="main-content"></div>
    </div>

    <script src="data.js"></script>

    <script>
        const firebaseConfig = {
          apiKey: "AIzaSyAuJlFyTuYypCVdJrZCrQGOEZZS5WDH6pI",
          authDomain: "app-c71dd.firebaseapp.com",
          projectId: "app-c71dd",
          storageBucket: "app-c71dd.firebasestorage.app",
          messagingSenderId: "256556501971",
          appId: "1:256556501971:web:98dbba775b0b8ca913bd26"
        };

        firebase.initializeApp(firebaseConfig);

        function login() {
            const provider = new firebase.auth.GoogleAuthProvider();
            firebase.auth().signInWithPopup(provider);
        }

        firebase.auth().onAuthStateChanged((user) => {
            if (user && user.email === "nitaylayish298@gmail.com") {
                document.getElementById('login-screen').classList.add('hidden');
                document.getElementById('content').classList.remove('hidden');
                renderSeries(); // הפקודה שמציגה את הסדרות
            } else if (user) {
                alert("גישה חסומה");
                firebase.auth().signOut();
            }
        });

        function renderSeries() {
            const container = document.getElementById('main-content');
            container.innerHTML = '';
            
            // יצירת רשימת קטגוריות ייחודיות מתוך הנתונים
            const categories = [...new Set(seriesData.map(item => item.category))];

            categories.forEach(cat => {
                const section = document.createElement('div');
                section.innerHTML = `<div class="category-title">${cat}</div>`;
                const row = document.createElement('div');
                row.className = 'series-row';

                seriesData.filter(s => s.category === cat).forEach(item => {
                    const card = document.createElement('div');
                    card.className = 'series-card';
                    card.tabIndex = "0";
                    card.innerHTML = `<img src="${item.image}"><div class="series-name">${item.title}</div>`;
                    card.onclick = () => window.location.href = item.driveUrl;
                    row.appendChild(card);
                });

                section.appendChild(row);
                container.appendChild(section);
            });
        }
    </script>
</body>
</html>
